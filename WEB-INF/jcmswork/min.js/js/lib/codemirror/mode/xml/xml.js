(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){a.defineMode("xml",function(x,k){var q=x.indentUnit;var w=k.multilineTagIndentFactor||1;var c=k.multilineTagIndentPastTag;if(c==null){c=true}var v=k.htmlMode?{autoSelfClosers:{area:true,base:true,br:true,col:true,command:true,embed:true,frame:true,hr:true,img:true,input:true,keygen:true,link:true,meta:true,param:true,source:true,track:true,wbr:true},implicitlyClosed:{dd:true,li:true,optgroup:true,option:true,p:true,rp:true,rt:true,tbody:true,td:true,tfoot:true,th:true,tr:true},contextGrabbers:{dd:{dd:true,dt:true},dt:{dd:true,dt:true},li:{li:true},option:{option:true,optgroup:true},optgroup:{optgroup:true},p:{address:true,article:true,aside:true,blockquote:true,dir:true,div:true,dl:true,fieldset:true,footer:true,form:true,h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,header:true,hgroup:true,hr:true,menu:true,nav:true,ol:true,p:true,pre:true,section:true,table:true,ul:true},rp:{rp:true,rt:true},rt:{rp:true,rt:true},tbody:{tbody:true,tfoot:true},td:{td:true,th:true},tfoot:{tbody:true},th:{td:true,th:true},thead:{tbody:true,tfoot:true},tr:{tr:true}},doNotIndent:{pre:true},allowUnquoted:true,allowMissing:true,caseFold:true}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:false,allowMissing:false,caseFold:false};var b=k.alignCDATA;var e,f,g;function n(F,E){function C(H){E.tokenize=H;return H(F,E)}var D=F.next();if(D=="<"){if(F.eat("!")){if(F.eat("[")){if(F.match("CDATA[")){return C(u("atom","]]>"))}else{return null}}else{if(F.match("--")){return C(u("comment","-->"))}else{if(F.match("DOCTYPE",true,true)){F.eatWhile(/[\w\._\-]/);return C(y(1))}else{return null}}}}else{if(F.eat("?")){F.eatWhile(/[\w\._\-]/);E.tokenize=u("meta","?>");return"meta"}else{var A=F.eat("/");e="";var G;while((G=F.eat(/[^\s\u00a0=<>\"\'\/?]/))){e+=G}if(v.caseFold){e=e.toLowerCase()}if(!e){return"tag error"}f=A?"closeTag":"openTag";E.tokenize=m;return"tag"}}}else{if(D=="&"){var B;if(F.eat("#")){if(F.eat("x")){B=F.eatWhile(/[a-fA-F\d]/)&&F.eat(";")}else{B=F.eatWhile(/[\d]/)&&F.eat(";")}}else{B=F.eatWhile(/[\w\.\-:]/)&&F.eat(";")}return B?"atom":"error"}else{F.eatWhile(/[^&<]/);return null}}}function m(D,C){var B=D.next();if(B==">"||(B=="/"&&D.eat(">"))){C.tokenize=n;f=B==">"?"endTag":"selfcloseTag";return"tag"}else{if(B=="="){f="equals";return null}else{if(B=="<"){C.tokenize=n;C.state=l;C.tagName=C.tagStart=null;var A=C.tokenize(D,C);return A?A+" error":"error"}else{if(/[\'\"]/.test(B)){C.tokenize=j(B);C.stringStartCol=D.column();return C.tokenize(D,C)}else{D.eatWhile(/[^\s\u00a0=<>\"\']/);return"word"}}}}}function j(A){var B=function(D,C){while(!D.eol()){if(D.next()==A){C.tokenize=m;break}}return"string"};B.isInAttribute=true;return B}function u(B,A){return function(D,C){while(!D.eol()){if(D.match(A)){C.tokenize=n;break}D.next()}return B}}function y(A){return function(D,C){var B;while((B=D.next())!=null){if(B=="<"){C.tokenize=y(A+1);return C.tokenize(D,C)}else{if(B==">"){if(A==1){C.tokenize=n;break}else{C.tokenize=y(A-1);return C.tokenize(D,C)}}}}return"meta"}}function r(B,A,C){this.prev=B.context;this.tagName=A;this.indent=B.indented;this.startOfLine=C;if(v.doNotIndent.hasOwnProperty(A)||(B.context&&B.context.noIndent)){this.noIndent=true}}function t(A){if(A.context){A.context=A.context.prev}}function p(C,B){var A;while(true){if(!C.context){return}A=C.context.tagName;if(!v.contextGrabbers.hasOwnProperty(A)||!v.contextGrabbers[A].hasOwnProperty(B)){return}t(C)}}function l(A,D,C){if(A=="openTag"){C.tagName=e;C.tagStart=D.column();return d}else{if(A=="closeTag"){var B=false;if(C.context){if(C.context.tagName!=e){if(v.implicitlyClosed.hasOwnProperty(C.context.tagName)){t(C)}B=!C.context||C.context.tagName!=e}}else{B=true}if(B){g="error"}return B?z:s}else{return l}}}function s(B,A,C){if(B!="endTag"){g="error";return s}t(C);return l}function z(A,C,B){g="error";return s(A,C,B)}function d(D,B,E){if(D=="word"){g="attribute";return i}else{if(D=="endTag"||D=="selfcloseTag"){var C=E.tagName,A=E.tagStart;E.tagName=E.tagStart=null;if(D=="selfcloseTag"||v.autoSelfClosers.hasOwnProperty(C)){p(E,C)}else{p(E,C);E.context=new r(E,C,A==E.indented)}return l}}g="error";return d}function i(A,C,B){if(A=="equals"){return o}if(!v.allowMissing){g="error"}return d(A,C,B)}function o(A,C,B){if(A=="string"){return h}if(A=="word"&&v.allowUnquoted){g="string";return d}g="error";return d(A,C,B)}function h(A,C,B){if(A=="string"){return h}return d(A,C,B)}return{startState:function(){return{tokenize:n,state:l,indented:0,tagName:null,tagStart:null,context:null}},token:function(C,B){if(!B.tagName&&C.sol()){B.indented=C.indentation()}if(C.eatSpace()){return null}e=f=null;var A=B.tokenize(C,B);if((A||f)&&A!="comment"){g=null;B.state=B.state(f||A,C,B);if(g){A=g=="error"?A+" error":g}}return A},indent:function(D,A,C){var B=D.context;if(D.tokenize.isInAttribute){return D.stringStartCol+1}if(B&&B.noIndent){return a.Pass}if(D.tokenize!=m&&D.tokenize!=n){return C?C.match(/^(\s*)/)[0].length:0}if(D.tagName){if(c){return D.tagStart+D.tagName.length+2}else{return D.tagStart+q*w}}if(b&&/<!\[CDATA\[/.test(A)){return 0}if(B&&/^<\//.test(A)){B=B.prev}while(B&&!B.startOfLine){B=B.prev}if(B){return B.indent+q}else{return 0}},electricChars:"/",blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:k.htmlMode?"html":"xml",helperType:k.htmlMode?"html":"xml"}});a.defineMIME("text/xml","xml");a.defineMIME("application/xml","xml");if(!a.mimeModes.hasOwnProperty("text/html")){a.defineMIME("text/html",{name:"xml",htmlMode:true})}});