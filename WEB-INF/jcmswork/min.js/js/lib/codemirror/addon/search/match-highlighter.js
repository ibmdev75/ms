(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(a){var h=2;var b="matchhighlight";var c=100;function g(j){if(typeof j=="object"){this.minChars=j.minChars;this.style=j.style;this.showToken=j.showToken;this.delay=j.delay}if(this.style==null){this.style=b}if(this.minChars==null){this.minChars=h}if(this.delay==null){this.delay=c}this.overlay=this.timeout=null}a.defineOption("highlightSelectionMatches",false,function(j,m,k){if(k&&k!=a.Init){var l=j.state.matchHighlighter.overlay;if(l){j.removeOverlay(l)}clearTimeout(j.state.matchHighlighter.timeout);j.state.matchHighlighter=null;j.off("cursorActivity",f)}if(m){j.state.matchHighlighter=new g(m);e(j);j.on("cursorActivity",f)}});function f(j){var k=j.state.matchHighlighter;clearTimeout(k.timeout);k.timeout=setTimeout(function(){e(j)},k.delay)}function e(j){j.operation(function(){var o=j.state.matchHighlighter;if(o.overlay){j.removeOverlay(o.overlay);o.overlay=null}if(!j.somethingSelected()&&o.showToken){var n=o.showToken===true?/[\w$]/:o.showToken;var p=j.getCursor(),l=j.getLine(p.line),q=p.ch,k=q;while(q&&n.test(l.charAt(q-1))){--q}while(k<l.length&&n.test(l.charAt(k))){++k}if(q<k){j.addOverlay(o.overlay=d(l.slice(q,k),n,o.style))}return}if(j.getCursor("head").line!=j.getCursor("anchor").line){return}var m=j.getSelections()[0].replace(/^\s+|\s+$/g,"");if(m.length>=o.minChars){j.addOverlay(o.overlay=d(m,false,o.style))}})}function i(k,j){return(!k.start||!j.test(k.string.charAt(k.start-1)))&&(k.pos==k.string.length||!j.test(k.string.charAt(k.pos)))}function d(l,k,j){return{token:function(m){if(m.match(l)&&(!k||i(m,k))){return j}m.next();m.skipTo(l.charAt(0))||m.skipToEnd()}}}});