(function(a){if(typeof exports=="object"&&typeof module=="object"){a(require("../../lib/codemirror"))}else{if(typeof define=="function"&&define.amd){define(["../../lib/codemirror"],a)}else{a(CodeMirror)}}})(function(b){var c=b.Pos;function a(k,f){var o=f&&f.schemaInfo;var w=(f&&f.quoteChar)||'"';if(!o){return}var e=k.getCursor(),j=k.getTokenAt(e);var x=b.innerMode(k.getMode(),j.state);if(x.mode.name!="xml"){return}var l=[],t=false,u;var g=j.string.charAt(0)=="<";if(!x.state.tagName||g){if(g){u=j.string.slice(1);t=true}var d=x.state.context,p=d&&o[d.tagName];var h=d?p&&p.children:o["!top"];if(h){for(var v=0;v<h.length;++v){if(!u||h[v].lastIndexOf(u,0)==0){l.push("<"+h[v])}}}else{for(var y in o){if(o.hasOwnProperty(y)&&y!="!top"&&(!u||y.lastIndexOf(u,0)==0)){l.push("<"+y)}}}if(d&&(!u||("/"+d.tagName).lastIndexOf(u,0)==0)){l.push("</"+d.tagName+">")}}else{var p=o[x.state.tagName],r=p&&p.attrs;if(!r){return}if(j.type=="string"||j.string=="="){var n=k.getRange(c(e.line,Math.max(0,e.ch-60)),c(e.line,j.type=="string"?j.start:j.end));var q=n.match(/([^\s\u00a0=<>\"\']+)=$/),m;if(!q||!r.hasOwnProperty(q[1])||!(m=r[q[1]])){return}if(typeof m=="function"){m=m.call(this,k)}if(j.type=="string"){u=j.string;if(/['"]/.test(j.string.charAt(0))){w=j.string.charAt(0);u=j.string.slice(1)}t=true}for(var v=0;v<m.length;++v){if(!u||m[v].lastIndexOf(u,0)==0){l.push(w+m[v]+w)}}}else{if(j.type=="attribute"){u=j.string;t=true}for(var s in r){if(r.hasOwnProperty(s)&&(!u||s.lastIndexOf(u,0)==0)){l.push(s)}}}}return{list:l,from:t?c(e.line,j.start):e,to:t?c(e.line,j.end):e}}b.registerHelper("hint","xml",a)});