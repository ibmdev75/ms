if(typeof CodeMirror!="undefined"){CodeMirror.defineMode("twiki",function(){function m(x,w,v){w.tokenize=v;return v(x,w)}var f,o;function t(x,w,v){f=x;o=v;return w}function l(B,z){var y=B.sol();var x=B.peek();if(z.link){if(z.link==1){z.link=2;while(B.peek()!="]"){B.next()}return p(B,z,"link","link")}else{B.next();B.next();z.link=false;return p(B,z,"link","link-trigger")}}if(z.eat){B.skipToEnd();var w=z.eat;z.eat=false;return t("header",w)}if(y){if(B.match("---++",true)){var A=1;while(B.peek()=="+"){B.next();A++}while(B.peek()==" "){B.next()}z.eat="header header-"+A;return t("header","header header-trigger")}if(B.match("---",true)){B.skipToEnd();return t("hr","hr")}if(B.match(/\s+\*/,true)){B.skipToEnd();return t("list","list")}if(B.match(/\s+#/,true)){B.skipToEnd();return t("list","list")}if(B.match(/\s+\d/,true)){B.skipToEnd();return t("list","list")}if(B.match(/\s{3}\w+:/,true)){B.skipToEnd();return t("list","list")}}if(B.match(/[\w\/\.:_-]+\.(jpg|gif|png)/,true)){return m(B,z,c)}var v=B.match(/\[\[[^\]]+\](\[[^\]]+\])*\]/,false);if(v){B.match(/\[\[([^\]]+\]\[)*/,true);z.link=1;return p(B,z,"link","link-trigger")}if(B.match(/[\w-.]+@[\w-]+\.\w+/,true)){return m(B,z,b)}if(B.match(/\[\w+[^\]]*\/\]/,true)){return m(B,z,e)}if(!z.block&&B.match(/\[\w+[^\]]*\]/,true)){z.block=B.current().match(/\[(\w+)[^\]]*\]/)[1];return m(B,z,s)}if(z.block&&B.match(/\[\/\w+[^\]]*\]/,true)){if(z.block==B.current().match(/\[\/(\w+)[^\]]*\]/)[1]){z.block=false;return m(B,z,s)}}if(B.match(/^\*[^\*]+\*($|\s)/,false)){return m(B,z,h)}if(B.match(/^_[^_]+_($|\s)/,false)){return m(B,z,u)}if(B.match(/^__[^_]+__($|\s)/,false)){return m(B,z,k)}if(B.match(/^=[^=]+=($|\s)/,false)){return m(B,z,g)}if(B.match(/^==[^=]+==($|\s)/,false)){return m(B,z,i)}x=B.next();if(z.block){return t("text","block")}if(x=="ยง"){return m(B,z,d)}if(x=="|"){return m(B,z,j)}if(z.table){return t("text",z.table)}}function p(y,w,x,v){w.tokenize=l;return t(x,v)}function a(D,w,B,x,A,C){if(!A){return p(D,w,B,x)}for(var v,z,y=0;A&&(v=D.next());y++){z=(v==A.charAt(z))?z+1:0;if(z==A.length){w.tokenize=l;if(C){C(D,w,y)}return t(B,x)}}w.tokenize=l;if(C){C(D,w)}}function r(D,w,B,x,A,C){if(!A){return p(D,w,B,x)}if(!w.tok_start){D.next();w.tok_start=true;w.tokenize=function(F,E){return r(F,E,B,x,A)};return t(B,"token-start")}if(w.tok_end){D.next();w.tok_start=false;w.tok_end=false;w.tokenize=function(F,E){return r(F,E,B,x,false)};if(C){C(D,w)}return t(B,"token-end")}for(var v,z,y=0;A&&(v=D.peek());y++){z=(v==A.charAt(z))?z+1:0;if(z!=A.length){D.next();continue}w.tokenize=function(F,E){return r(F,E,B,x,A)};w.tok_end=true;return t(B,x)}w.tok_start=false;w.tok_end=false;w.tokenize=l;if(C){C(D,w)}}function h(w,v){return r(w,v,"text","strong","*")}function u(w,v){return r(w,v,"text","em","_")}function k(w,v){return r(w,v,"text","emstrong","__")}function g(w,v){return r(w,v,"text","fix","=")}function i(w,v){return r(w,v,"text","fixstrong","==")}function c(w,v){return p(w,v,"link","link")}function e(w,v){return p(w,v,"text","block-inline")}function s(w,v){return p(w,v,"text","block")}function q(w,v){return p(w,v,"link","link")}function b(w,v){return p(w,v,"link","link")}function j(w,v){v.table="cell";return a(w,v,"table","cell","|",n)}function d(w,v){v.table="cell-header";return a(w,v,"table","cell-header","ยง",n)}function n(x,w,v){if(v){x.backUp(v+1)}else{w.table=false}}return{startState:function(){return{tokenize:l,indented:0,level:0}},token:function(x,w){var v=w.tokenize(x,w);return v},electricChars:""}});CodeMirror.defineMIME("text/x-twiki","twiki")};