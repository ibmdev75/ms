$(function(){module("jalios-single-submit:form");test("should disable/enable form",function(){var a=$("#testForm");var b=$("#testSubmit");var c=$("#testlink");ok(!$.jalios.form.SingleSubmit.processing,"form is ready");ok(!b.hasClass("disabled"),"submit button is not disabled");ok(!c.hasClass("disabled"),"link button is not disabled");$.jalios.form.SingleSubmit.disable();ok($.jalios.form.SingleSubmit.processing,"form is not ready");ok(b.hasClass("disabled"),"submit button is disabled");ok(c.hasClass("disabled"),"link button is disabled");$.jalios.form.SingleSubmit.enable();ok(!$.jalios.form.SingleSubmit.processing,"form is ready");ok(!b.hasClass("disabled"),"submit button is not disabled");ok(!c.hasClass("disabled"),"link button is not disabled")});test("should not submit twice form",function(){var a=$("#testForm");var b=$("#testSubmit");var c=0;a.on("submit",function(d){d.preventDefault()});$(document).on("submit","#testForm",function(d){c++});b.trigger({type:"click",which:1});b.trigger({type:"click",which:1});b.trigger({type:"click",which:1});ok(c==1,"testForm only submited once");ok(b.hasClass("disabled"),"submit button is disabled")});test("should be submited N times with class noSingleSubmitButton",function(){var a=$("#testForm2");var b=$("#testSubmit2");var c=0;a.on("submit",function(d){d.preventDefault()});$(document).on("submit","#testForm2",function(d){c++});b.trigger({type:"click",which:1});b.trigger({type:"click",which:1});b.trigger({type:"click",which:1});ok(c==3,"testForm submited "+c+" times");ok(!b.hasClass("disabled"),"submit button is not disabled")});module("jalios-single-submit:ajax-refresh")});